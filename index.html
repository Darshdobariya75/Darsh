<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch api </title>
</head>
<body>
    <h1>api fatch data</h1>
    <form name="fr" onsubmit="return validd(event)">
        Name: <input type="text" id="name" name="name"><br><br>
        Password: <input type="password" id="pass" name="pass"><br><br>
        <input type="submit" value="Submit">
    </form>

    <script>
        async function validd(event) {
            event.preventDefault();

            let uname = document.forms['fr']['name'].value;
            let pass = document.forms['fr']['pass'].value;

            console.log(uname);
            console.log(pass);
            console.log('done');

            if (uname == '') {
                alert('please Enter your user name !!');
                return false;
            } else if (uname.length < 2) {
                alert('please enter valid username');
                return false;
            } else if (uname.length >= 20) {
                alert('please enter valid username');
                return false;
            }

            if (pass == '') {
                alert('Please enter your password!');
                return false;
            } else if (pass.length < 6 || pass.length > 15) {
                alert('Password must be between 6 and 15 characters.');
                return false;
            }

            try {
                let api = await fetch("https://fakestoreapi.com/users");
                let users = await api.json();

                let matchedUser = users.find(user => user.username === uname && user.password === pass);

                if (matchedUser) {
                    alert("Login Successful!");
                    window.location.href = "home.html";
                    return true;
                } else {
                    alert("Invalid username or password!");
                    return false;
                }
            } catch (error) {
                alert("Something went wrong! Please try again later.");
                return false;
            }
        }
    </script>
</body>
</html>